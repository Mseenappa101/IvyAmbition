<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Net Price Calculator | IvyAmbition</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="tools.css" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />
</head>
<body class="tool-page">

  <nav class="nav">
    <div class="nav-inner">
      <a href="index.html" class="logo">Ivy<span>Ambition</span></a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="undergraduate.html">Undergrad</a></li>
        <li><a href="tools.html">Free Tools</a></li>
        <li><a href="undergraduate.html#book-call" class="nav-cta">Book a Call</a></li>
      </ul>
      <button class="hamburger" id="hamburger" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="index.html">Home</a><a href="undergraduate.html">Undergrad</a>
      <a href="tools.html">Free Tools</a><a href="undergraduate.html#book-call">Book a Call</a>
    </div>
  </nav>

  <section class="tool-hero">
    <div class="container tool-hero-content">
      <a href="tools.html" class="tool-breadcrumb">← Back to Free Tools</a>
      <span class="tool-eyebrow">Free Tool · Net Price Calculator</span>
      <h1>What Will College Actually Cost You?</h1>
      <p>Compare your estimated net price — what you'll actually pay after grants and scholarships — across every school on your list. The sticker price is almost never what you pay.</p>
    </div>
  </section>

  <div class="tool-body">
    <div class="container">

      <!-- Profile Entry -->
      <div class="calc-card" style="max-width:760px;margin:0 auto 40px;">
        <h2>Your Profile</h2>
        <p>Enter your financial information once. We'll estimate your net price at every school in our database.</p>
        <div class="calc-row">
          <div class="calc-field">
            <label>Family Income (AGI)</label>
            <input type="number" id="income" placeholder="e.g. 85000" value="85000" />
          </div>
          <div class="calc-field">
            <label>GPA</label>
            <input type="number" id="gpa" placeholder="e.g. 3.8" value="3.8" step="0.01" min="0" max="4.0" />
          </div>
        </div>
        <div class="calc-row" style="margin-top:16px;">
          <div class="calc-field">
            <label>SAT Score (or equivalent)</label>
            <input type="number" id="sat" placeholder="e.g. 1350" value="1350" min="400" max="1600" />
          </div>
          <div class="calc-field">
            <label>State of Residence</label>
            <select id="stateRes">
              <option value="">Out-of-State (all)</option>
              <option value="CA">California</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="MI">Michigan</option>
              <option value="NC">North Carolina</option>
              <option value="NY">New York</option>
              <option value="OH">Ohio</option>
              <option value="PA">Pennsylvania</option>
              <option value="TX">Texas</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WI">Wisconsin</option>
            </select>
          </div>
        </div>
        <div class="calc-row" style="margin-top:16px;">
          <div class="calc-field">
            <label>School Type</label>
            <select id="schoolTypeFilter">
              <option value="all">All Schools</option>
              <option value="private">Private</option>
              <option value="public">Public</option>
            </select>
          </div>
          <div class="calc-field">
            <label>Sort Results By</label>
            <select id="sortBy">
              <option value="netprice-asc">Net Price (Low→High)</option>
              <option value="netprice-desc">Net Price (High→Low)</option>
              <option value="accept-asc">Acceptance Rate (Low→High)</option>
              <option value="name-asc">School Name (A→Z)</option>
            </select>
          </div>
        </div>
        <div class="calc-submit">
          <button class="btn btn-primary" id="calcBtn" style="width:100%;">Calculate Net Prices →</button>
        </div>
      </div>

      <!-- Results Table -->
      <div class="calc-card" id="resultsCard" style="display:none;">
        <h2>Net Price Comparison</h2>
        <p id="resultsSubtext"></p>
        <div class="matrix-table-wrap">
          <table class="matrix-table" id="resultsTable">
            <thead>
              <tr>
                <th>School</th>
                <th>Type</th>
                <th>Sticker Price (COA)</th>
                <th>Est. Need Aid</th>
                <th>Est. Merit Aid</th>
                <th>Est. Net Price</th>
                <th>4-Year Total</th>
                <th>Acceptance Rate</th>
              </tr>
            </thead>
            <tbody id="resultsBody"></tbody>
          </table>
        </div>
        <div style="margin-top:20px;padding:16px;background:var(--cream);border-radius:10px;font-size:13px;color:var(--text-muted);line-height:1.6;">
          <strong style="color:var(--navy);">Important disclaimer:</strong> These are estimates based on published averages and financial aid formulas. Your actual net price depends on your complete financial profile, the school's specific financial aid policies, and factors like housing choice. Always use each school's official Net Price Calculator for a more accurate estimate.
        </div>
      </div>

    </div>
  </div>

  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-brand"><a href="index.html" class="logo">Ivy<span>Ambition</span></a><p>Elite undergraduate admissions consulting.</p></div>
      <div class="footer-links">
        <div class="footer-col"><h5>Free Tools</h5><ul>
          <li><a href="college-search.html">College Search</a></li>
          <li><a href="net-price.html">Net Price Calculator</a></li>
          <li><a href="efc-calculator.html">EFC Calculator</a></li>
          <li><a href="roi-calculator.html">ROI Calculator</a></li>
        </ul></div>
        <div class="footer-col"><h5>Programs</h5><ul>
          <li><a href="undergraduate.html">Undergraduate</a></li><li><a href="lawschool.html">Law School</a></li>
        </ul></div>
      </div>
    </div>
    <div class="footer-bottom"><div class="container"><p>&copy; 2025 IvyAmbition. All rights reserved.</p></div></div>
  </footer>

  <script src="script.js"></script>
  <script src="college-data.js"></script>
  <script>
  document.getElementById('calcBtn').addEventListener('click', calculate);

  function estimateNeedAid(school, income, gpa) {
    // Need aid: based on income bracket and school's pctAid/avgGrant
    if (school.avgGrant === 0) return 0;
    let needFactor = 1.0;
    if (income <= 30000) needFactor = 1.3;
    else if (income <= 60000) needFactor = 1.1;
    else if (income <= 100000) needFactor = 0.9;
    else if (income <= 150000) needFactor = 0.6;
    else if (income <= 200000) needFactor = 0.3;
    else needFactor = 0;
    return Math.round(school.avgGrant * needFactor);
  }

  function estimateMeritAid(school, gpa, sat) {
    if (school.avgMerit === 0) return 0;
    // Merit aid scales with how far above median the student is
    const satMid = (school.sat25 + school.sat75) / 2;
    const satFactor = sat >= school.sat75 ? 1.2 : sat >= satMid ? 1.0 : sat >= school.sat25 ? 0.6 : 0.2;
    const gpaFactor = gpa >= 3.9 ? 1.2 : gpa >= 3.7 ? 1.0 : gpa >= 3.5 ? 0.8 : 0.5;
    return Math.round(school.avgMerit * ((satFactor + gpaFactor) / 2));
  }

  function calculate() {
    const income = +document.getElementById('income').value || 85000;
    const gpa = +document.getElementById('gpa').value || 3.5;
    const sat = +document.getElementById('sat').value || 1200;
    const stateRes = document.getElementById('stateRes').value;
    const schoolTypeFilter = document.getElementById('schoolTypeFilter').value;
    const sortBy = document.getElementById('sortBy').value;

    let schools = COLLEGES;
    if (schoolTypeFilter !== 'all') schools = schools.filter(s => s.type === schoolTypeFilter);

    let results = schools.map(s => {
      const tuition = (stateRes && s.state === stateRes && s.type === 'public') ? s.tuitionI : s.tuitionO;
      const coa = tuition + s.rb;
      const needAid = estimateNeedAid(s, income, gpa);
      const meritAid = estimateMeritAid(s, gpa, sat);
      const totalAid = Math.min(coa, needAid + meritAid);
      const netPrice = Math.max(0, coa - totalAid);
      return { ...s, coa, needAid: Math.min(needAid, coa), meritAid: Math.min(meritAid, coa - Math.min(needAid, coa)), netPrice, fourYear: netPrice * 4 };
    });

    results.sort((a, b) => {
      switch(sortBy) {
        case 'netprice-asc':  return a.netPrice - b.netPrice;
        case 'netprice-desc': return b.netPrice - a.netPrice;
        case 'accept-asc':    return a.accept - b.accept;
        case 'name-asc':      return a.name.localeCompare(b.name);
        default: return 0;
      }
    });

    const tbody = document.getElementById('resultsBody');
    tbody.innerHTML = results.map(s => {
      const netColor = s.netPrice <= 20000 ? '#2e7d32' : s.netPrice <= 45000 ? '#b7830a' : '#c62828';
      return `<tr>
        <td><strong style="color:var(--navy)">${s.name}</strong><br/><span style="font-size:11px;color:var(--text-muted)">${s.city}, ${s.state}</span></td>
        <td><span style="font-size:11px;font-weight:700;padding:2px 8px;border-radius:100px;background:${s.type==='public'?'#e8f4ff':'#e8f0ff'};color:${s.type==='public'?'#0d4f8c':'#1a2f80'}">${s.type==='public'?'Public':'Private'}</span></td>
        <td>$${s.coa.toLocaleString()}</td>
        <td style="color:#1e8449">${s.needAid > 0 ? '-$' + s.needAid.toLocaleString() : '—'}</td>
        <td style="color:#1e8449">${s.meritAid > 0 ? '-$' + s.meritAid.toLocaleString() : '—'}</td>
        <td><strong style="font-size:16px;color:${netColor}">$${s.netPrice.toLocaleString()}</strong></td>
        <td style="font-weight:600;color:${netColor}">$${s.fourYear.toLocaleString()}</td>
        <td>${s.accept}%</td>
      </tr>`;
    }).join('');

    const avgNet = Math.round(results.reduce((a,s) => a + s.netPrice, 0) / results.length);
    document.getElementById('resultsSubtext').textContent = `Showing ${results.length} schools. Your estimated average net price: $${avgNet.toLocaleString()}/year.`;
    document.getElementById('resultsCard').style.display = 'block';
    document.getElementById('resultsCard').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
  </script>
</body>
</html>
